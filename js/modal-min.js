const linkFeedback=document.querySelector(".footer-button"),pageBody=document.querySelector(".page-body"),popupFeedback=document.querySelector(".modal-feedback"),btnFeedbackClose=document.querySelector(".button-close"),modalForm=document.querySelector(".modal-form"),inputName=popupFeedback.querySelector("[name=name]"),inputEmail=popupFeedback.querySelector("[name=email]"),inputMessage=popupFeedback.querySelector("[name=text]");let isStorageSupport=!0,storage="";try{storage=localStorage.getItem("name"),storage=localStorage.getItem("email")}catch(e){isStorageSupport=!1}linkFeedback.addEventListener("click",function(e){e.preventDefault(),popupFeedback.classList.add("modal-feedback-show"),pageBody.classList.add("page-body-fixed"),storage?(inputName.value=storage,inputEmail.focus()):inputName.focus(),storage?(inputEmail.value=storage,inputMessage.focus()):inputName.focus()}),btnFeedbackClose.addEventListener("click",function(e){e.preventDefault(),popupFeedback.classList.remove("modal-feedback-show"),popupFeedback.classList.remove("modal-feedback-error"),pageBody.classList.remove("page-body-fixed")}),modalForm.addEventListener("submit",function(e){inputName.value&&inputEmail.value&&inputMessage.value?isStorageSupport&&(localStorage.setItem("name",inputName.value),localStorage.setItem("email",inputEmail.value)):(e.preventDefault(),popupFeedback.classList.remove("modal-feedback-error"),popupFeedback.offsetWidth=popupFeedback.offsetWidth,popupFeedback.classList.add("modal-feedback-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&popupFeedback.classList.contains("modal-feedback-show")&&(e.preventDefault(),popupFeedback.classList.remove("modal-feedback-show"),popupFeedback.classList.remove("modal-feedback-error"),pageBody.classList.remove("page-body-fixed"))});
